apply plugin: "org.grails.grails-plugin-publish"

// For publishing snapshots (either to private artifactory or OSS)
publishing {
    repositories {
        maven {
            def publishUrl = project.hasProperty("artifactoryPublishUrl") ? project.artifactoryPublishUrl : ''
            def repoKey = project.version.endsWith("SNAPSHOT") ? 'plugins-snapshot-local' : 'plugins-release-local'

            url = "$publishUrl/$repoKey"

            credentials {
                credentials {
                    def u = project.hasProperty("artifactoryPublishUsername") ? project.artifactoryPublishUsername : ''
                    def p = project.hasProperty("artifactoryPublishPassword") ? project.artifactoryPublishPassword : ''
                    username = u
                    password = p
                }
            }
        }
    }
}

